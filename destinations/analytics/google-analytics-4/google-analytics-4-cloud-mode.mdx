---
# slug: "/docs/destinations/analytics/google-analytics-4"
title: "Google Analytics 4"
description: Step-by-step guide to send event data from RudderStack to Google Analytics 4.
---

# Google Analytics 4

[Google Analytics 4](https://analytics.google.com/) \(formerly known as "App + Web"\) is a new Google Analytics property, with different instrumentation and reports than the Universal Analytics properties. Google Analytics 4 can be used for websites, apps, or both together - whereas Universal Analytics properties only support websites.

RudderStack supports the `gtag` way of tagging in websites.

## Getting started

Before configuring Google Analytics 4 as a destination in RudderStack, verify if the source platform is supported by Google Analytics 4, by referring to the table below:

| **Connection Mode** | Web           | Mobile | Server |
| :------------------ | :------------ | :----- | :----- |
| **Device Mode**     | **Supported** | **-**  | **-**  |
| **Cloud Mode**      | **Supported** | **-**  | **-**  |

<div class="infoBlock">

To know more about the difference between Cloud mode and Device mode in RudderStack, read the <a href="https://rudderstack.com/docs/rudderstack-cloud/rudderstack-connection-modes/">RudderStack connection modes</a> guide.

</div>

Once you have confirmed that the source platform supports sending events to Google Analytics 4, follow these steps:

1. From your [RudderStack dashboard](https://app.rudderstack.com/), add the source. Then, from the list of destinations, select **Google Analytics 4**.
2. Assign a name to your destination and click on Next.

## Connection settings

To successfully configure Google Analytics 4 as a destination, configure the following settings:

<img src="/assets/event-stream-destinations/google-analytics-4-connection-settings.png" alt="Google Analytics 4 Connection Settings in RudderStack"/>
<img src="/assets/event-stream-destinations/google-analytics-4-connection-settings2.png" alt="Google Analytics 4 Connection Settings in RudderStack"/>

- **API Secret**: Enter the API Secret generated through the Google Analytics UI. It can be created in the Google Analytics dashboard under **Admin > Data Streams > choose your stream > Measurement Protocol > Create**.
  
- **Measurement Id**: Enter the Measurement Id which is the identidier for a data stream. It can be found in Google Analytics dashboard under **Admin > Data Streams > choose your stream > Measurement ID**.

<div class="infoBlock">
  
 Refer to the <a href="#faq">FAQ</a> section for more information on how to obtain the API Secret and Measurement Id.
  </div>

### Client-side events filtering

<div class="infoBlock">

This option is applicable only if you're sending events to Google Analytics 4 via the web device mode. Refer to the <a href="https://www.rudderstack.com/docs/stream-sources/rudderstack-sdk-integration-guides/event-filtering/">Client-side Event Filtering</a> guide for more information on this feature.
</div>

### Web SDK settings

- **Use device mode to send events**: Enable this setting to send events via the [RudderStack device mode](https://www.rudderstack.com/docs/rudderstack-cloud/rudderstack-connection-modes/#device-mode).
- **Block a Page View Event**: Enable this setting to disable sending `page_view` events on load. However, you can explicitly send a `page_view` event by calling the `page()` API.
- **Extend Page View Property**: Enable this setting to send the following properties along with any other custom property passed to the `page` call of the RudderStack SDK:
  - `url`
  - `search`
 
<div class="infoBlock">
  
Google Analytics 4 has a limit on the number of unique properties per event name. The default `page_view` event supports the properties mentioned in <a href="https://support.google.com/analytics/answer/9234069?hl=en&ref_topic=6317484">Automatically collected events</a>() guide.
  </div>
  
- **Send userId to GA**: Enabling or disabling this setting exhibits the following behavior:
  - If enabled, user ID is set to the identified visitors and sent according to [Cookies and user identification](https://developers.google.com/tag-platform/devguides/cookies#set_user_id) document.
  - If disabled, userId is not sent. Instead, Rudderstack only sends user traits set as `user_properties` to Google Analytics. The user properties are set on the `gtag` client according to [Set user properties](https://developers.google.com/analytics/devguides/collection/ga4/user-properties?technology=websites) guide.


## Identify

<div class="infoBlock">
  
  The <code class="inline-code">identify</code> call is only supported for device mode.
  </div>

The [`identify`](https://rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/identify/) call lets you identify a visiting user and associate them to their actions. It also lets you record the traits about them like their name, email address, etc.

User-ID is an advanced feature that lets GA4 present a cross-device, cross-platform view of your customers' behavior. Google Analytics 4 uses `userId` and `deviceId` \(GA's `cid` value from Universal Analytics terminology\) to identify users.

A sample `identify` call is as shown:

```javascript
rudderanalytics.identify("1hKOmRA4el9Zt1WSfVJIVo4GRlm", {
  name: "Alex Keener",
  email: "alex@example.com",
})
```

In the above snippet, the `userId` will be set to `1hKOmRA4el9Zt1WSfVJIVo4GRlm` for Google Analytics and the name and email will be set as `user_properties`.

## Page

<div class="infoBlock">
  
  The <code class="inline-code">page</code> call is only supported for device mode.
  </div>
  
The [`page`](https://www.rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/page/) call lets you record your website's page views with any additional relevant information about the viewed page.

Google Analytics 4 `gtag` sends a `page_view` event to Google Analytics by default every-time it is loaded. You can also send `page_view` event to Google Analytics whenever you make an explicit `page()` call to RudderStack SDK.

RudderStack sends the following properties by default:

- `path` mapped to `page_location`
- `title` mapped to `page_title`
- `referrer` mapped to `page_referrer`

You can also make `page()` call with any custom and standard properties as shown below:

```javascript
rudderanalytics.page({
  path: "/test_browser.html",
  url: "http://example.com/test_browser.html?param1=true",
  title: "Page Load",
  search: "?param1=true",
  referrer: "referrer",
})
```

## Track (Device mode)

The [`track`](https://www.rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/track/) call lets you capture user events along with the properties associated with them.

A sample `track` call is as shown:

```javascript
rudderanalytics.track("Track me")
```

RudderStack SDK sends the track event name and any properties as custom properties to Google Analytics 4.

<div class="infoBlock">

RudderStack SDK flattens the properties that are nested and not standard Google Analytics 4 properties before sending them to Google Analytics.
</div>

<div class="infoBlock">

There are limits on the number of custom properties per event that can be sent to Google Analytics 4. The RudderStack SDK <code class="inline-code">**does not drop**</code> the payload based on these limits. If the events are don't show up in the debug view or in the Google Analytics dashboard reports, refer to <a href="https://support.google.com/analytics/answer/9267744?hl=en">this Google support page</a> to know more about the collection limits.
</div>

## Track (Cloud mode)

The [`track`](https://www.rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/track/) call lets you capture user events along with the properties associated with them.

A sample `track` call is as shown:

```javascript
rudderanalytics.track('product list viewed', {
  list_id: "related_products",
  category: "Related_products",
  products: [{
    product_id: "507f1f77bcf86cd799439011",
    name: "Monopoly: 3rd Edition",
    coupon: "SUMMER_FUN",
    category: "Apparel",
    brand: "Google",
    variant: "green",
    price: "19",
    quantity: "2",
    position: "1",
    affiliation: "Google Merchandise Store",
    currency: "USD",
    discount: 2.22,
    item_category2: "Adult",
    item_category3: "Shirts",
    item_category4: "Crew",
    item_category5: "Short sleeve",
    item_list_id: "related_products",
    item_list_name: "Related Products",
    location_id: "L_12345"
  }]
});
```

## E-commerce

RudderStack supports e-commerce tracking for Google Analytics 4. Use the [RudderStack eCommerce spec](https://rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-ecommerce-events-specification/) for sending events while instrumenting your site with the RudderStack SDK.

Below are some examples of the track event names that are passed to Google Analytics 4-specific e-commerce event name:

| RudderStack event name    | Google Analytics 4 event name |
| :------------------------ | :---------------------------- |
| Products Searched         | `search`                      |
| Product List Viewed       | `view_item_list`              |
| Promotion Viewed          | `view_promotion`              |
| Product Clicked           | `select_item`                 |
| Product Added To Wishlist | `add_to_wishlist`             |
| Product Added             | `add_to_cart`                 |
| Cart Shared               | `share`                       |
| Checkout Started          | `begin_checkout`              |
| Order Completed           | `purchase`                    |

<div class="infoBlock">

For each product in the order, there must be an <code class="inline-code">id</code> and <code class="inline-code">name</code> associated. More info on Google Analytics 4 e-commerce event and corresponding properties can be found <a href="https://developers.google.com/gtagjs/reference/ga4-events#view_item_list">here</a>.

</div>

## FAQ

### How do I obtain the Measurement Id?

1. Login to Google Analytics dashboard.
2. Go to the **Admin** section from the left sidebar.
3. Select the account and then property from the drop down for which you wish to get the id.
4. Now click on **Data Streams** and select the stream for which you wish to get the id.
5. Copy the measurement id by clicking on copy to clipboard icon.

### How do I obtain the API Secret?

- Login to Google Analytics dashboard.
- Go to the **Admin** section from the left sidebar.
- Select the account and then property from the drop down for which you wish to get the id.
- Now click on **Data Streams** and select the stream for which you wish to get the id.
- Copy the measurement id by clicking on copy to clipboard icon.

### What reserved names does GA 4 has?

Google nalytics 4 has a few events names which are reserved and cannot be used. Refer to the [Reserved Names](https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#reserved_names) for more information on such event names.

## Contact us

For queries on any of the sections covered in this guide, you can [contact us](mailto:%20docs@rudderstack.com) or start a conversation in our [Slack](https://rudderstack.com/join-rudderstack-slack-community) community.
