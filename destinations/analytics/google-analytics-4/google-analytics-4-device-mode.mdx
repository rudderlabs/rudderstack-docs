---
# slug: "/docs/destinations/analytics/google-analytics-4-device-mode"
title: "Device Mode"
description: Detailed technical documentation on sending events to Google Analytics 4 using the RudderStack Web Device mode.
---

# Device Mode

RudderStack lets you send your event data to Google Analytics 4 destination via the Device mode using the native web SDK. It supports the `gtag` way of tagging in websites in the Device mode.

<div class="infoBlock">

For more information on sending events via the Device mode, refer to the <a href="https://rudderstack.com/docs/rudderstack-cloud/rudderstack-connection-modes/">RudderStack connection modes</a> guide.

</div>

<div class="successBlock">

Find the open-source JavaScript SDK code for this destination in our <a href="https://github.com/rudderlabs/rudder-sdk-js/tree/production/integrations/GA4">GitHub repository</a>.
</div>


## Identify

The [`identify`](https://rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/identify/) call lets you identify a visiting user and associate them to their actions. It also lets you record the traits about them like their name, email address, etc.

User-ID is an advanced feature that lets GA4 present a cross-device, cross-platform view of your customers' behavior. Google Analytics 4 uses `userId` and `deviceId` \(GA's `cid` value from Universal Analytics terminology\) to identify users.

A sample `identify` call is as shown:

```javascript
rudderanalytics.identify("1hKOmRA4el9Zt1WSfVJIVo4GRlm", {
  name: "Alex Keener",
  email: "alex@example.com",
})
```

In the above snippet, the `userId` will be set to `1hKOmRA4el9Zt1WSfVJIVo4GRlm` for Google Analytics and the name and email will be set as `user_properties`.

## Page
  
The [`page`](https://www.rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/page/) call lets you record your website's page views with any additional relevant information about the viewed page.

Google Analytics 4 `gtag` sends a `page_view` event to Google Analytics by default every-time it is loaded. You can also send `page_view` event to Google Analytics whenever you make an explicit `page()` call to RudderStack SDK.

RudderStack sends the following properties by default:

- `path` mapped to `page_location`
- `title` mapped to `page_title`
- `referrer` mapped to `page_referrer`

You can also make `page()` call with any custom and standard properties as shown below:

```javascript
rudderanalytics.page({
  path: "/test_browser.html",
  url: "http://example.com/test_browser.html?param1=true",
  title: "Page Load",
  search: "?param1=true",
  referrer: "referrer",
})
```

## Track

The [`track`](https://www.rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-spec/track/) call lets you capture user events along with the properties associated with them.

A sample `track` call is as shown:

```javascript
rudderanalytics.track("Track me")
```

RudderStack SDK sends the track event name and any properties as custom properties to Google Analytics 4.

<div class="infoBlock">

RudderStack SDK flattens the properties that are nested and not standard Google Analytics 4 properties before sending them to Google Analytics.
</div>

<div class="infoBlock">

There are limits on the number of custom properties per event that can be sent to Google Analytics 4. The RudderStack SDK <code class="inline-code">**does not drop**</code> the payload based on these limits. If the events are don't show up in the debug view or in the Google Analytics dashboard reports, refer to <a href="https://support.google.com/analytics/answer/9267744?hl=en">Google support page</a> to know more about the collection limits.
</div>

## E-commerce

RudderStack supports e-commerce tracking for Google Analytics 4. You can use the [RudderStack e-commerce specification](https://rudderstack.com/docs/rudderstack-api/api-specification/rudderstack-ecommerce-events-specification/) for sending events while instrumenting your site with the RudderStack SDK.

The below table lists the mappings of the `track` events and properties that are passed to Google Analytics 4 e-commerce events and properties:

<table>
  <tr>
    <th colspan="2">Event Mapping</th>
    <th colspan="2">Property Mapping</th>
  </tr>
  <tr>
    <th>RudderStack</th>
    <th>Google Analytics 4</th>
    <th>RudderStack</th>
    <th>Google Analytics 4</th>
  </tr>
  <tr>
    <td>Products Searched</td>
    <td><code class=“inline-code”>search</code></td>
    <td><code class=“inline-code”>query</code></td>
    <td><code class=“inline-code”>search_term</code></td>
  </tr>
  <tr>
    <td>Product List Viewed</td>
    <td><code class=“inline-code”>view_item_list</code></td>
    <td rowspan="2"><code class=“inline-code”>list_id</code></br><code class=“inline-code”>category</code></td>
    <td rowspan="2"><code class=“inline-code”>item_list_id</code></br><code class=“inline-code”>item_list_name</code></td>
  </tr>
  <tr>
   <td>Product Clicked</td>
    <td><code class=“inline-code”>select_item</code></td>
  </tr>
  <tr>
    <td>Promotion Viewed</br>Promotion Clicked</td>
    <td><code class=“inline-code”>view_promotion</code></br><code class=“inline-code”>select_promotion</code></td>
    <td><code class=“inline-code”>position</code></td>
    <td><code class=“inline-code”>location_id</code></td>
  </tr>
   <tr>
    <td>Product Viewed</br>Product Added</br>Product Removed</br>Cart Viewed</br>Checkout Started</br>Product Added to Wishlist</td>
    <td><code class=“inline-code”>view_item</code></br><code class=“inline-code”>add_cart</code></br><code class=“inline-code”>remove_from_cart</code></br><code class=“inline-code”>view_cart</code></br><code class=“inline-code”>start_checkout</code></br><code class=“inline-code”>add_to_wishlist</code></td>
    <td><code class=“inline-code”>total</code></td>
    <td><code class=“inline-code”>value</code></td>
  </tr>
   <tr>
    <td>Order Completed</td>
    <td><code class=“inline-code”>purchase</code></td>
    <td rowspan="2"><code class=“inline-code”>order_id</code></br><code class=“inline-code”>total</code></td>
    <td rowspan="2"><code class=“inline-code”>transaction_id</code></br><code class=“inline-code”>value</code></td>
  </tr>
  <tr>
   <td>Order Refunded</td>
    <td><code class=“inline-code”>refund</code></td>
  </tr>
    <tr>
    <td>Product Shared</td>
    <td><code class=“inline-code”>share</code></td>
    <td><code class=“inline-code”>share_via</code></br><code class=“inline-code”>product_id</code></td>
    <td><code class=“inline-code”>method</code></br><code class=“inline-code”>content_id</code></td>
  </tr>
  <tr>
    <td>Cart Shared</td>
    <td><code class=“inline-code”>share</code></td>
    <td><code class=“inline-code”>content_type</code></td>
    <td><code class=“inline-code”>cart</code></td>
  </tr>
   <tr>
    <td>Group</td>
    <td><code class=“inline-code”>join_group</code></td>
    <td>-</td>
    <td>-</td>
  </tr>
  <tr>
    <td>Payment Info Entered</td>
    <td><code class=“inline-code”>add_payment_info</code></td>
    <td><code class=“inline-code”>payment_method</code></td>
    <td><code class=“inline-code”>payment_type</code></td>
  </tr>
  <tr>
    <td>Payment Info Entered</td>
    <td><code class=“inline-code”>add_shipping_info</code></td>
    <td><code class=“inline-code”>shipping_method</code></td>
    <td><code class=“inline-code”>shipping_tier</code></td>
  </tr>
</table>

<div class="infoBlock">

The <strong>Payment Info Entered</strong> event is mapped on the basis of parameters passed to it:
<ul>
  <li>If <code class=“inline-code”>payment_method</code> is passed along with the other fields, it maps to <code class=“inline-code”>add_payment_info</code></li> event.
 <li>If <code class=“inline-code”>shipping_method</code> is passed along with the other fields, it maps to <code class=“inline-code”>add_shipping_info</code></li> event.
  </ul>
</div>

<div class="infoBlock">

There must be an <code class="inline-code">id</code> and <code class="inline-code">name</code> associated for each product in the order. Refer to the <a href="https://developers.google.com/gtagjs/reference/ga4-events#view_item_list">Item list</a> for more information on Google Analytics 4 e-commerce events and corresponding properties.
</div>

Most of the above mentioned events include [`items`](https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference/events#view_item_list) parameter which accepts an `Item` array. The below table details out the mappings for `Items` array:

| RudderStack    | Google Analytics 4  |
| :-------------| :-----------------|
| product_id         | `item_id`        |
| name               | `item_name`      |
| price              | `price`          |
| position           | `index`          |
| category           | `item_category`  |
| list_id            | `item_list_id`   |
| category           | `item_list_name` |



### Rules for naming events

You must follow the below rules while choosing a name for the new events:

- Event names are case sensitive. For example, `my_event` and `My_Event` are two distinct events.
- Event names must start with a letter. Only letters, numbers, and underscores are permitted. **DO NOT** use spaces.
- Do not use reserved prefixes and event names. Refer to the <a href="#faq">FAQ</a> section to know more about the reserved event names and prefixes.

## FAQ

### What might be the reason for an error message from Google Analytics?

Google Analytics 4 has some reserved prefixes and events names which cannot be used. The list of such prefixes is mentioned below:

- _ (underscore)
- firebase_
- ga_
- google_
- gtag.

For the list of reserved event names, refer to the [Reserved Names](https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#reserved_names) guide.

## Contact us

For queries on any of the sections covered in this guide, you can [contact us](mailto:%20docs@rudderstack.com) or start a conversation in our [Slack](https://rudderstack.com/join-rudderstack-slack-community) community.
