---
# slug: "/docs/destinations/analytics/posthog"
title: "PostHog"
description: Step-by-step guide to send event data from RudderStack to PostHog.
---

# PostHog

[**PostHog**](https://posthog.com/) is a complete product analytics stack built for data analysts and managers. It gives you easy access to scalable product analytics with full control over all your user data.

RudderStack supports PostHog as a destination to which you can seamlessly send your event data for analytics.

<div class="successBlock">

  <strong>Find the open-source transformer code for this destination in our <a href="https://github.com/rudderlabs/rudder-transformer/tree/master/v0/destinations/posthog">GitHub repository</a></strong>.
</div>

## Getting started

Before configuring PostHog as a destination in RudderStack, verify if the source platform is supported by PostHog by referring to the table below:

| **Connection Mode** | Web           | Mobile        | Server        |
| :------------------ | :------------ | :------------ | :------------ |
| **Device Mode**     | **Supported** | **-**         | **-**         |
| **Cloud Mode**      | **Supported** | **Supported** | **Supported** |

<div class="infoBlock">

To know more about the difference between cloud mode and device mode in RudderStack, refer to the <a href="https://rudderstack.com/docs/connections/rudderstack-connection-modes/">RudderStack Connection Modes</a> guide.
</div>

Once you have confirmed that the source platform supports sending events to PostHog, follow these steps:

1. From your [RudderStack dashboard](https://app.rudderstack.com/), add the source. Then, from the list of destinations, select **PostHog**.

<div class="infoBlock">

Follow our guide on <a href="https://rudderstack.com/docs/connections/adding-source-and-destination-rudderstack/">Adding a Source and Destination in RudderStack</a> for more information.
</div>

2. Assign a name to your destination and click on **Next**.

### Connection settings

To successfully configure PostHog as a destination, you will need to configure the following settings:

<img src="../../assets/event-stream-destinations/posthog-connection-settings.png" alt="PostHog connection settings" />

The settings are listed below:

- **Team API Key**: Enter your PostHog team API key. This is a mandatory field.

<div class="infoBlock">

For more information on obtaining your PostHog Team API Key, refer to the <a href="#faq">FAQ</a> section below.
</div>

- **Instance URL**: Enter your PostHog instance URL.

<div class="infoBlock">

If youâ€™re hosting your own PostHog instance, add the URL of your instance without the trailing slash. So, the URL will look something like <code class="inline-code">https://[your-instance].com</code>.
</div>

**Use updated mapping for Group calls**: This setting is disabled by default. When enabled, RudderStack sends the `group` traits as event properties to PostHog.

### Web SDK settings

This section lists some of the other configurable settings while setting up the PostHog destination in RudderStack.

<img src="../../assets/event-stream-destinations/posthog-additional-settings.png" alt="PostHog additional connection settings" />

- **Use device mode to send events**: If enabled, RudderStack will send the events to PostHog via the [device mode](https://www.rudderstack.com/docs/connections/adding-source-and-destination-rudderstack/).
- **Enable Local Storage for Persistence**: Enable this option to reduce the amount of data stored in the cookies by storing it locally instead.
- **Enable autocapture with PostHog**: Enable this option to allow PostHog to send [auto-captured](https://posthog.com/docs/integrations/js-integration#usage) events.
- **Allow PostHog to automatically capture pageview events**: Enable this setting to allow the PostHog web SDK to send a page view event every time it is loaded on a page.
- **Disable session recoding**: Enable this setting to stop PostHog from recording the user sessions. 

<div class="infoBlock">

For more information on PostHog's session recording feature, refer to the <a href="https://posthog.com/docs/features/session-recording" target="_blank">PostHog documentation</a>.
</div>

- **Additional headers to pass with XHR requests to PostHog API**: Add a list of key-value pairs in this field. The RudderStack web SDK will then forward these headers on the event requests sent to PostHog.
- **Property black list** - Add a list of traits or event properties that you want the PostHog SDK to filter.

## Identify

To identify a user to PostHog, you need to call the `identify` API.

<div class="infoBlock">

For information on the <code class="inline-code">identify</code> call, please refer to our <a href="https://rudderstack.com/docs/rudderstack-api/">RudderStack API Specification</a> guide.

</div>

A sample `identify` call is as shown below:

```javascript
rudderanalytics.identify("name123", {
  name: "Name Surname",
  first_name: "Name",
  last_name: "Surname",
  email: "name@surname.com",
  createdAt: "Thu Mar 24 2020 17:46:45 GMT+0000 (UTC)",
})
```

We pass the user traits passed along with the `identify` call to PostHog under the `$set` key according to the [PostHog Identify API](https://posthog.com/docs/api/post-only-endpoints#identify) .

## Page

The `page` call allows you to record information whenever a user sees a web page, along with the associated optional properties of that page.

```javascript
rudderanalytics.page({
  path: "path",
  url: "url",
  title: "title",
  search: "search",
  referrer: "referrer",
})
```

<div class="infoBlock">

For the <code class="inline-code">page</code> call, we send <code class="inline-code">$pageview</code> as an event to PostHog according to the <a href="https://posthog.com/docs/api/post-only-endpoints#page">PostHog Page API</a>.

</div>

In the above sample, we capture information related to the page being viewed such as the category of the page \(`Category`\), as well as the name of the page \(`Sample`\) along with the unique user ID.

## Screen

The `screen` method allows you to record whenever a user sees the mobile screen, along with any associated optional properties.

<div class="infoBlock">

The <code class="inline-code">screen</code> call is similar to the <code class="inline-code">page</code> call, but it is exclusive to your mobile device.

</div>

A sample `screen` call using RudderStack's iOS SDK is as shown:

```javascript
[[RudderClient sharedInstance] screen:@"Main"
            properties:@{@"prop_key" : @"prop_value"}];
```

<div class="infoBlock">

For screen call we send <code class="inline-code">$screen</code> as an event to PostHog according to <a href="https://posthog.com/docs/api/post-only-endpoints#screen">PostHog Screen API</a>.

</div>

In the above snippet, we capture information related to the screen being viewed, such as the name and category.

## Track

The `track` call allows you to capture any action that the user might perform, along with the properties that are associated with that action. Each action is considered to be an event.

A sample `track` call looks like the following:

```javascript
rudderanalytics.track("Order Completed", {
  checkout_id: "C324532",
  order_id: "T1230",
  value: 15.98,
  revenue: 16.98,
  shipping: 3.0,
  coupon: "FY21",
  currency: "INR",
  products: [
    {
      product_id: "product-mixedfruit-jam",
      sku: "sku-1",
      category: "Food",
      name: "Food/Drink",
      brand: "Sample",
      variant: "None",
      price: 10.0,
      quantity: 2,
      currency: "INR",
      position: 1,
      value: 6.0,
      typeOfProduct: "Food",
      url: "https://www.example.com/product/bacon-jam",
      image_url: "https://www.example.com/product/bacon-jam.jpg",
    },
  ],
})
```

<div class="infoBlock">

PostHog support <code class="inline-code">track</code> call as type<code class="inline-code">capture.</code> It sends the user behavior/action as an event. This information is sent to PostHog according to the <a href="https://posthog.com/docs/api/post-only-endpoints#capture">PostHog Capture API</a>.

</div>

## Alias

Calling `rudderanalytics.alias()` passes an `alias`call with `userId` and `previousId` to the PostHog queue.

The following code snippet shows a sample `alias` call in RudderStack:

```javascript
rudderanalytics.alias("newUserId")
```

<div class="infoBlock">

For alias call, we send $create_alias as an event to PostHog according to <a href="https://posthog.com/docs/api/post-only-endpoints#alias">PostHog Alias API</a>.

</div>

<div class="infoBlock">

Here, <code class="inline-code">previousUserId</code> gets mapped to _distinct id_ and <code class="inline-code">newUserId</code> to _alias_ in PostHog.

</div>

## Group

The `group` call lets you associate a particular identified user with a group, such as a company, organization, or an account.

<div class="infoBlock">

The group call sends <code class="inline-code">$group</code> as an event to PostHog according to the <a href="https://posthog.com/docs/api/post-only-endpoints#group">PostHog Group API</a>.

</div>

```javascript
rudderanalytics.group("sample_group_id", {
  name: "CompanyA",
  location: "USA",
})
```

## Super Properties in Web

To pass [super properties](https://posthog.com/docs/integrations/js-integration#super-properties) to PostHog JavaScript SDK, pass the key-value pairs as below:

```javascript
// This will set {superKey1: "value1", superKey2: "value2"} as super properties to PostHog SDK
rudderanalytics.track("event", {prop: "value"}, {
  integrations: {
    POSTHOG: {
      superProperties: {
        superKey1: "value1",
        superKey2: "value2"
      }
    }
  }
})
```

```javascript
// This will set {superKey3: "value3"} as set once super properties to PostHog SDK
rudderanalytics.track("event", {prop: "value"}, {
  integrations: {
    POSTHOG: {
      setOnceProperties: {
        superKey3: "value3"
      }
    }
  }
})
```

```javascript
// This will unset super properties superKey1, superKey2, superKey3 to PostHog SDK
rudderanalytics.track("event", {prop: "value"}, {
  integrations: {
    POSTHOG: {
      unsetProperties: [
        superKey1,
        superKey2,
        superKey3
      ]
    }
  }
})
```

<div class="infoBlock">

Super properties related info can be passed to any of <code class="inline-code">track</code>, <code class="inline-code">page</code> and <code class="inline-code">identify</code> calls to the RudderStack JavaScript SDK.

</div>

## Property Mapping

RudderStack maps the following `properties` sent to Posthog standard contextual properties:

| Standard Rudder Field           | Standard Posthog Field |
| :------------------------------ | :--------------------- |
| `context.os.name`               | `$os`                  |
| `context.page.url`              | `$current_url`         |
| `url`                           | `$host`                |
| `context.page.path`             | `$pathname`            |
| `context.screen.height`         | `$screen_height`       |
| `context.screen.width`          | `$screen_width`        |
| `context.library.name`          | `$lib`                 |
| `context.library.version`       | `$lib_version`         |
| `originalTimestamp`,`timestamp` | `$time`                |
| `context.device.id`             | `$device_id`           |
| `request_ip`,`context.ip`       | `$ip`                  |
| `timestamp`,`originalTimestamp` | `$timestamp`           |
| `anonymousId`                   | `$anon_distinct_id`    |
| `userId`,`anonymousId`          | `distinct_id`          |
| `context.screen.density`        | `$screen_density`      |
| `context.device.manufacturer`   | `$device_manufacturer` |
| `context.os.version`            | `$os_version`          |
| `context.timezone`              | `$timezone`            |
| `context.locale`                | `$locale`              |
| `context.userAgent`             | `$user_agent`          |
| `context.app.version`           | `$app_version`         |
| `context.device.name`           | `$device_name`         |
| `context.network.carrier`       | `$network_carrier`     |
| `context.app.name`              | `$app_name`            |
| `context.device.model`          | `$device_model`        |
| `context.app.namespace`         | `$app_namespace`       |
| `context.app.build`             | `$app_build`           |

<div class="warningBlock">

**Note**: Posthog has a property **$insert_id** which is auto generated by posthog sdk when using device-mode. But when using RudderStack cloud-mode we do not map any value to this property.

</div>

## FAQs

### **How do you get the PostHog Team API Key?**

- Login to PostHog dashboard.
- Go to the **Settings** tab under the **Project** section on the left sidebar.
- You will find your key written as **Project API Key** or **Team API Key**.

## Contact Us

If you come across any issues while configuring PostHog with RudderStack, please feel free to [contact us](mailto:%20docs@rudderstack.com) or start a conversation in our [Slack](https://rudderstack.com/join-rudderstack-slack-community) community. We will be happy to help you.
