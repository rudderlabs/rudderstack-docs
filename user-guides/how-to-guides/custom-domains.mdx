---
# slug: "/docs/user-guides/how-to-guides/custom-domains"
title: "How to Use Custom Domains"
description: >-
  Use your own domain to serve the RudderStack Javascript SDK and send events to your own domain.
---

# How to Use Custom Domains

This guide contains the steps to use your own domain to route the events or proxy the [RudderStack JavaScript SDK](https://www.rudderstack.com/docs/stream-sources/rudderstack-sdk-integration-guides/rudderstack-javascript-sdk/) via your own CDN. 

<div class="warningBlock">

You will need access to your domain’s DNS settings as well as your CDN settings.
</div>

<div class="infoBlock">

The examples in this guide use CloudFront. However, the settings should be similar regardless of your CDN.
</div>

## Endpoint details

The following table lists the three endpoints to be proxied via your own CDN to route the events:

| Endpoint | Description |
| :---------| :-----------|
| `cdn.rudderlabs.com` | Loads the JavaScript SDK. |
| `api.rudderlabs.com` | Fetches the source configuration based on your source write key. |
| `<DATA_PLANE_URL>` | Required for sending the events to RudderStack. | 

To use your own domain for these endpoints, you will need to route the traffic through your CDN. 

<div class="warningBlock">

You will incur CDN charges for this traffic if you choose to use your own domain.
</div>

For each endpoint, you will need to create a CDN distribution and add a CNAME record in your domain for the distribution domain. This guide shows you how to do that.

## Setup for serving the SDK

To serve the JavaScript SDK, start by creating a new distribution. The following screenshots highlight the required distribution settings:

<img src="../../assets/user-guides/custom-domains/custom-domains-1.png" alt="Custom domains distribution settings" />
<img src="../../assets/user-guides/custom-domains/custom-domains-2.png" alt="Custom domains distribution settings" />
<img src="../../assets/user-guides/custom-domains/custom-domains-3.png" alt="Custom domains distribution settings" />

Some of the important settings are listed below:

| Field                  | Setting              |
| :--------------------- | :------------------- |
| Origin domain     | `cdn.rudderlabs.com` |
| Protocol | HTTPS Only           |

### Default cache behavior settings

| Field     | Setting                 |
| :---------- | :---------------------- |
| Viewer protocol policy              | Redirect HTTP to HTTPS                                     |
| Allowed HTTP methods                | `GET`, `HEAD`, `OPTIONS`, `PUT`, `POST`, `PATCH`, `DELETE` |
| Cache and origin request settings   | Use legacy cache settings                                  |
| Forward Cookies                     | All                                                        |
| Query String Forwarding and Caching | Forward all, cache based on all                            |

### Additional distribution settings

| Field       | Setting                              |
| :------- | :------------------- |
| Alternate domain name \(CNAME\) | `<subdomain.yourdomain.com>`         |
| SSL Certificate                   | Custom SSL Certificate \(more info\) |
| Custom SSL Client Support         | Clients that support SNI             |

Finally, click on **Create distribution** and wait for CloudFront to be deployed.

<img src="../../assets/screen-shot-2021-02-16-at-3.00.43-pm.png" />

### Add CNAME Record to DNS

Once your distribution is deployed, you’ll need to create a CNAME record on your domain for the subdomain you wish to use and the distribution url.

| **Name**                                                                                                                                                                                                                    | Value                                                                           |
| :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ |
| Subdomain you wish to use \(which was used in the creation of the distribution\). This will vary based on your DNS provider but will typically be just the subdomain. Example: for `cdn.yourdomain.com` you would use `cdn` | The CDN URL for the distribution created. Example: `d3jlkfchu4u.cloudfront.net` |

<img src="../../assets/screen-shot-2021-02-19-at-12.31.51-pm.png" />

### Serving the SDK

Once setup and DNS propagation has completed, you’ll be able to change the URL for the SDK.

Before:

```markup
 <script src="https://cdn.rudderlabs.com/v1.1/rudder-analytics.min.js"></script>
```

After:

```markup
<script src="https://subdomain.yourdomain.com/v1.1/rudder-analytics.min.js"></script>
```

<div class="infoBlock">

If you are using an older version of the JavaScript SDK (v1), refer to the <a href="https://www.rudderstack.com/docs/stream-sources/rudderstack-sdk-integration-guides/rudderstack-javascript-sdk/version-migration-guide/">Version Migration Guide</a> to migrate to v1.1.
</div>

## Setup for Sending Events

Normally all events are sent to your data plane url `<your_data_plane_url>`. To have events routed through your own domain, you’ll need to setup a proxy to that and then use your own url for `DATA_PLANE_URL` when initializing the SDK.

### Settings

The settings for sending events will be the same as the settings for serving the JavaScript SDK except for the following:

| Field                             | Setting                      |
| :-------------------------------- | :--------------------------- |
| Origin Domain Name                | `<your_data_plane_url>`      |
| Alternate Domain Names \(CNAMEs\) | `<subdomain.yourdomain.com>` |

### **Add CNAME Record to DNS**

The settings for the CNAME record will be the same as the settings for serving the JavaScript SDK. You'll need to use the newly created distribution domain and the subdomain you set for it.

### **Sending Events**

Once setup and DNS propagation has completed, you’ll want to use the newly created url as your `DATA_PLANE_URL` when initiating the sdk.

Before:

```javascript
rudderanalytics.load(
  "1iYTYFYkfteuXxTj3eEt5CmeLvO",
  "https://hosted.rudderlabs.com"
)
```

After:

```javascript
rudderanalytics.load(
  "1iYTYFYkfteuXxTj3eEt5CmeLvO",
  "https://subdomain.yourdomain.com"
)
```

You should be able to confirm in the network tab of your browser console that events going to `/track`, `/identify` and `/page` are being routed through your own domain and not the rudderstack.com domain.

## **Setup for fetching sourceConfig**

When the javascript SDK is loaded, it uses the `writeKey` for your selected source to fetch the Source Configuration from RudderStack. This determines which native sdks may be needed and which destinations are used.

The call to fetch the sourceConfig is sent to `api.rudderstack.com` with the `writeKey` for your source used an authorization header. For this reason, this distribution will be slightly different as we will need to explicitly whitelist the Authorization header to make sure it is sent along with each request.

### **Settings**

The settings for sending events will be the same as the settings for serving the JavaScript SDK except for the following:

| Field                             | Setting                      |
| :-------------------------------- | :--------------------------- |
| Origin Domain Name                | `api.rudderlabs.com`         |
| Alternate Domain Names \(CNAMEs\) | `<subdomain.yourdomain.com>` |

We also need to add a Whitelisting for the Authorization headers in **Default Cache Behavior Settings**.

As with serving the JavaScript SDK and Sending events, you'll choose Use legacy cache settings

<img src="../../assets/screen-shot-2021-02-16-at-3.04.25-pm.png" />

Under Cache Based on Selected Request Headers, you'll choose Whitelist.

<img src="../../assets/screen-shot-2021-02-16-at-3.04.55-pm.png" />

Choose Authorization and Add &gt;&gt; to whitelist the Authorization Header

<img src="../../assets/screen-shot-2021-02-16-at-3.05.09-pm.png" />

### Add CNAME Record to DNS

The settings for the CNAME record will be the same as the settings for serving the JavaScript SDK. You'll need to use the newly created distribution domain and the subdomain you set for it.

### Fetching the sourceConfig

To use a custom URL to fetch the sourceConfig, we need to add it as an option when loading the JavaScript SDK.

```javascript
rudderanalytics.load(
  "1iYTYFYkfteuXxTj3eEt5CmeLvO",
  "https://hosted.rudderlabs.com",
  {
    configUrl: "https://subdomain.yourdomain.com",
  }
)
```

## Custom SSL certificates

To use your own domain, you'll need to Request or Import a certificate with your CDN provider. The following are the steps to use AWS Certificate Manager with CloudFront:

When choosing your SSL certificate on CloudFront, you'll be given the option to do so:

<img src="../../assets/screen-shot-2021-02-19-at-3.56.01-pm.png" />

From there you'll choose your subdomain or use a wildcard domain \(`*.yourdomain.com`\) to be able to setup multiple subdomains.

ACM will guide you through verifying by email or DNS TXT records and you'll be able to choose your own domain for SSL certificates once verified.

## Contact us

For queries on any of the sections covered in this guide, you can [contact us](mailto:%20docs@rudderstack.com) or start a conversation in our [Slack](https://rudderstack.com/join-rudderstack-slack-community) community.
