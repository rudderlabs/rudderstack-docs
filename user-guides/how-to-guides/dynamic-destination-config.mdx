---
# slug: "/docs/user-guides/how-to-guides/dynamic-destination-configuration"
title: "Loading Destination Configuration via Event Payload"
description: >-
  Step-by-step guide on dynamically configuring your destination in RudderStack via the event payload.
---

# Loading Destination Configuration via Event Payload

While setting a destination in RudderStack is quite straightforward, you might encounter a scenario where you need to configure multiple instances of a destination with different configurations for specific fields. RudderStack lets you pass these configuration values **via the event payload** dynamically, while setting up the destination in the dashboard.

All you need to do is pass the path of your event payload from which the configuration value will be fetched, along with a default value for the field.

<div class="successBlock">
  
  You can use this feature for any RudderStack destination.
</div>

## Supported configuration format

RudderStack supports the following format of the field config in the dashboard settings:

```javascript
{{event.path.config.name || "default_config_value"}}
```

Any value present in the path will be passed as a configuration value in the dashboard settings. Otherwise, the default value will be used to configure the destination.

<div class="infoBlock">
  
  You will need to add a transformation that populates the configuration values for the payload path. Refer to the use-case below for more information.
</div>

### Default value format

You can set the default configuration value as per your requirement. Note that in case of string, it needs to be written in double quotes.

<div class="infoBlock">
  
  To set a number as the default value, we recommend setting it as a string.
</div>

## Use-case

Suppose you want to send your event data to different Google Analytics instances based on the source ID. In this scenario, setting a dynamic tracking ID helps you set up different Google Analytics destinations, each configured with a specific tracking ID.

### Step 1: Add a transformation

To populate the configuration values from the event payload, you need to [**add a transformation function**](https://rudderstack.com/docs/transformations/#adding-a-transformation). A sample function is shown below:

```javascript
export function transformEvent(event, metadata) {
  let updatedEvent = event;
  const met = metadata(event);
  if (
    met &&
    met.sourceId === "example_source_id_1" &&
    event.message &&
    event.message.properties
  ) {
    updatedEvent.properties.trackingId = "UA-Custom-TrackingID_1";
  } else if (
    met &&
    met.sourceId === "example_source_id_2" &&
    event.message &&
    event.message.properties
  ) {
    updatedEvent.properties.trackingId = "UA-Custom-TrackingID_2";
  }
  return updatedEvent;
}
```

For this transformation, the path that fetches the configuration values should be set in the dashboard settings as shown below:

```javascript
{{ message.properties.trackingId || "UA-1659942401" }}
```

### Step 2: Specify the path in destination settings

Once you have added a transformation, the next step is to add a Google Analytics destination in the RudderStack dashboard. 

<div class="infoBlock">

Follow our guide on <a href="https://rudderstack.com/docs/connections/adding-source-and-destination-rudderstack/">Adding a source and destination in RudderStack</a> guide for more information.
</div>

In the **Connection Settings**, the **Tracking ID** field of the destination should be configured as shown:

<img src="../../assets/Dynamic%20Destination%20Config.png" />

### How it works

Consider the following event payload:

```javascript
[{
  "message": {
    "channel": "web",
    "context": {
      "traits": {
        "name": "John Doe"
      },
      "app": {
        "build": "1.0.0",
        "name": "RudderStack JavaScript SDK",
        "namespace": "com.rudderstack.javascript",
        "version": "1.0.0"
      },
      "library": {
        "name": "RudderStack JavaScript SDK",
        "version": "1.0.0"
      },
      "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36",
      "locale": "en-US",
      "ip": "0.0.0.0",
      "os": {
        "name": "",
        "version": ""
      },
      "screen": {
        "density": 2
      }
    },
    "properties": {
      "trackingId": "UA-1234567890",
      "plan": "Sample Plan",
      "name": "john doe"
    },
    "type": "identify",
    "messageId": "84e26acc-56a5-4835-8233-591137fca468",
    "originalTimestamp": "2019-10-14T11:15:18.299Z",
    "anonymousId": "00000000000000000000000000",
    "userId": "123456",
    "integrations": {
      "All": true
    },
    "sentAt": "2019-10-14T09:03:22.563Z"
  },
  "destination": {
    "Config": {
      "trackingID": "{{ message.properties.trackingId || \"UA-1659942401\" }}",
      "doubleClick": true,
      "enhancedLinkAttribution": true,
      "classic": true,
      "ignoredReferrers": "",
      "serverClassic": false,
      "includeSearch": true,
      "trackCategorizedPages": true,
      "trackNamedPages": true,
      "sampleRate": "100",
      "siteSpeedSampleRate": "1",
      "setAllMappedProps": true,
      "enableServerSideIdentify": true,
      "serverSideIdentifyEventCategory": "name",
      "serverSideIdentifyEventAction": "action1",
      "anonymizeIp": true,
      "domain": "domain",
      "enhancedEcommerce": true,
      "nonInteraction": true,
      "optimize": "abc123",
      "sendUserId": true,
      "useGoogleAmpClientId": true,
      "web-useNativeSDK": true,
      "dimensions": [{
          "from": "name",
          "to": "dimension1"
        },
        {
          "from": "custom2",
          "to": "dimension2"
        }
      ],
      "metrics": [{
          "from": "email",
          "to": "metric1"
        },
        {
          "from": "trait2",
          "to": "metric2"
        }
      ],
      "resetCustomDimensionsOnPage": [{
          "resetCustomDimensionsOnPage": "abc"
        },
        {
          "resetCustomDimensionsOnPage": "xyz"
        }
      ],
      "contentGroupings": [{
          "from": "plan",
          "to": "contentGroup1"
        },
        {
          "from": "name",
          "to": "contentGroup2"
        }
      ]
    },
    "Enabled": true
  }
}]
```

Once you specify the value for the **Tracking ID** field as `{{ message.properties.trackingId || "UA-1659942401" }}` while setting up the Google Analytics destination, for the above payload, `UA-1234567890` will be passed the configuration value.

This is because `Config.trackingId` will be set to `UA-1234567890`, which is the value assigned to `properties.trackingId`.

In case `properties.trackingId` does not have any value, then `Config.trackingId` will be set to `UA-1659942401` (the default value) and passed as the destination configuration value.

## Contact us

For more information on any of the sections in this guide, feel free to [**contact us**](mailto:%20docs@rudderstack.com) or start a conversation on our [**Slack**](https://rudderstack.com/join-rudderstack-slack-community) channel.
