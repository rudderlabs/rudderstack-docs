---
title: "OneSignal"
description: Step-by-step guide on sending your event data from RudderStack to OneSignal.
---

[OneSignal](https://onesignal.com/) is a popular service which helps in driving customer engagement with multi-channel messaging across web and mobile push notifications, in-app messages, SMS, and email subscribers.

RudderStack supports OneSignal as a destination where you can send your event data seamlessly.

<div class="infoBlock">
Find the open source transformer code for this destination in the <a href="https://github.com/rudderlabs/rudder-transformer/blob/master/v0/destinations/">GitHub repository</a>.
</div>

## Getting started

Before configuring OneSignal as a destination in RudderStack, verify if the source platform is supported by OneSignal by referring to the table below:

| **Connection Mode** | **Web** | **Mobile** | **Server** |
| :--- | :--- | :--- | :--- |
| **Device mode** | - | - | - |
| **Cloud mode** | **Supported**  | **Supported** | **Supported** |

<div class="infoBlock">
To know more about the difference between cloud mode and device mode in RudderStack, refer to the <Link to="/destinations/rudderstack-connection-modes/">RudderStack Connection Modes</Link> guide.
</div>

Once you have confirmed that the source platform supports sending events to OneSignal, follow these steps:

1. From your [RudderStack dashboard](https://app.rudderstack.com/), add a source. Then, from the list of destinations, select **OneSignal**.
2. Assign a name to the destination and click **Continue**.

### Connection settings

To successfully configure OneSignal as a destination, you will need to configure the following settings:

<img src="../../assets/event-stream-destinations/onesignal-connection-settings.png" alt="OneSignal connection settings"/>

- **App Id**: Enter your OneSignal App Id.

<div class="infoBlock">
For more information on finding the OneSignal App Id, refer to the <a href="#faq">FAQ</a> section below.
</div>

- **Toggle on to create a device using email**: Enable this setting to create a device using email.
- **Toggle on to create a device using phone number**: Enable this setting to create a device using phone number.
- **Toggle on to concatenate event name with properties**: Enable this setting to concatenate the event names with properties. for example, if `add_to_cart` is an event and `brand` is a property, the event will be sent as `add_to_cart_brand` tag.
- **Allowed Property List**: Enter the properties you want to add as device <Link to="https://documentation.onesignal.com/docs/add-user-data-tags">tags</Link>, if present in the payload. 

<div class="warningBlock">
The properties mentioned under <strong>Allowed Property List</strong> are considered only for the <code class="inline-code">track</code>  and <code class="inline-code">group</code> calls.
</div>


## Identify 

You can make an <Link to="/event-spec/standard-events/identify">`identify`</Link> call to add a new device to OneSignal App. However, if a device is already registered with the specified identifier, then it will update the existing device's record. Otherwise, it will create a new one.

A sample `identify` call is shown below: 

```javascript
rudderanalytics.identify('1hKOmRA4el9Zt1WSfVJIVo4GRlm', {
    firstName: 'Alex',
    lastName: 'Keener',
    email: "alex@example.com"
}, {
    externalId: [
        {
            type: "playerId",
            id: "Df344sdFgdDsS4"
        }
    ],
    integrations: {
        oneSignal: {
            deviceType: "6",
            identifier: "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
        }
    }
);
```

In the above snippet, the `playerId` is a unique ID for a device. If `playerId` is provided in `externalId`, the device having that `playerId` will be updated. The `externalId` is case-sensitive and is expected to be in the above format for correct mapping.

The `anonymoysId` is added as a tag with key as `anonymousId` and value as `anonymousId`'s value.

You can create multiple devices in a single `identify` call:
- For browser, RudderStack maps the `device_type` from the browser name and device type mapping as explained in the below code snippet. The `anonymousId` is set as an `identifier` depending upon the browser name. 

    RudderStack maps the following device types by default:

    ```javascript
    deviceTypeMapping = {
        android: 1,
        ios: 0,
        chrome: 5,
        safari: 7,
        firefox: 8
    }
    ```

    You can override the device type mapping mentioned above or set any other device type by providing the `deviceType` and `identifier` in the `integrations` object, as shown:

    ```javascript
    "integrations": {
        "one_signal": {
            "deviceType": "Sample device",
            "identifier": "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
        }
    }
    ```

- For iOS and Android, the `device_type` is taken from the `context.device.type` and is mapped with the `device_type` value from the mappings mentioned above. The `context.device.token`/`context.device.id` is set as an `identifier`. 

<div class="infoBlock">
 It is recommended to send <code class="inline-code">device.token</code> for push notifications.
</div>

- For email and SMS, enable the **Toggle on to create a device using email** and **Toggle on to create a device using phone number** settings in the RudderStack dashboard as well as send their data (`email` or `phone`) in the payload.


### Property mapping

The following table details the mappings between RudderStack and OneSignal **optional** properties:

| RudderStack property | OneSignal property |
| :-------| :--------| 
| `context.device.model`  | `device_model` | 
| `context.os.version` | `device_os` | 
| `context.timezone` | `timezone` | 
| `userId` | `external_user_id` | 
| `context.locale` | `language` |
| `traits.createdAt`/`context.traits.createdAt`/`timestamp`/`originalTimestamp` | `created_at`/`last_active` | 
| `traits.country`/`context.traits.country`/`traits.address.country`/`context.traits.address.country` | `country` | 

<div class="infoBlock">
All the <code class="inline-code">string</code> key-value pairs from <code class="inline-code">traits</code> are mapped inside the <code class="inline-code">tags</code> object as it is.
</div>

## Track

The <Link to="/event-spec/standard-events/track">`track`</Link> call can be used to update an existing device's tags in one of your OneSignal apps using the `external_user_id`. All devices containing the particular `external_user_id` are updated simultaneously.

While updating a device tag, any key inside a tag can be deleted by providing the key value as an empty string.

A sample `track` call is shown below:

```javascript
rudderanalytics.track('Add to cart', {
    purchased_item: "Shirt",
		brand: "Zara"
	}
);
```

### Property mapping

The following table details the mappings between RudderStack and OneSignal properties:

| RudderStack property | OneSignal property | Presence | 
| :-------| :--------| :------|
| `userId`  | `external_user_id` | Required | 

<div class="infoBlock">
All the properties added in the <strong>Allowed Property List</strong> setting in the RudderStack dashboard will be mapped inside the <code class="inline-code">tags</code> object if available in the payload. However, the key-value pair should be of data type <code class="inline-code">string</code> only.
</div>

## Group

The <Link to="/event-spec/standard-events/group">`group`</Link> call can be used to group the devices having device tags using  the `groupId`.

A sample `group` call is as shown:

```javascript
rudderanalytics.group('1hKOmRA4el9Zt1WSfVJIVo4GRlm', {
  name: "Apple Inc.",
  location: "USA",
});
```

### Property mapping

The following table details the mappings between RudderStack and OneSignal properties:

| RudderStack property | OneSignal property | Presence | 
| :-------| :--------| :------|
| `groupId` | `groupId` | Required | 

<div class="infoBlock">
All the properties added in the <strong>Allowed Property List</strong> setting in the RudderStack dashboard will be mapped inside the <code class="inline-code">tags</code> object if available in the payload. However, the key value pair should be of data type <code class="inline-code">string</code> only.
</div>

## FAQ

### Where can I find the OneSignal App Id?

To get your OneSignal App Id, follow these steps:

1. Log into your [OneSignal dashboard](https://dashboard.OneSignal.com/).
2. Go to your app's **Settings** > **Keys & IDs**.
3. You will find the OneSignal App Id, as shown:

<img src="../../assets/event-stream-destinations/onesignal-app-id.png" alt="OneSignal license code and API key" />
