---
title: "OneSignal"
description: Step-by-step guide on sending your event data from RudderStack to OneSignal.
---

[OneSignal](https://onesignal.com/) is the market leader in driving customer engagement with multi-channel messaging across Web and Mobile Push, In-App Messages, SMS, and Email subscribers. This destination is maintained by OneSignal.

RudderStack supports OneSignal as a destination to which you can seamlessly send your event data for efficient marketing and analytics.

<div class="infoBlock">
Find the open source transformer code for this destination in the <a href="https://github.com/rudderlabs/rudder-transformer/blob/master/v0/destinations/">GitHub repository</a>.
</div>

## Getting started

Before configuring OneSignal as a destination in RudderStack, verify if the source platform is supported by OneSignal by referring to the table below:

| **Connection Mode** | **Web** | **Mobile** | **Server** |
| :--- | :--- | :--- | :--- |
| **Device mode** | - | - | - |
| **Cloud mode** | **Supported**  | **Supported** | **Supported** |

<div class="infoBlock">
To know more about the difference between cloud mode and device mode in RudderStack, refer to the <Link to="/destinations/rudderstack-connection-modes/">RudderStack Connection Modes</Link> guide.
</div>

Once you have confirmed that the source platform supports sending events to OneSignal, follow these steps:

1. From your [RudderStack dashboard](https://app.rudderstack.com/), add a source. Then, from the list of destinations, select **OneSignal**.
2. Assign a name to the destination and click **Continue**.

### Connection settings

To successfully configure OneSignal as a destination, you will need to configure the following settings:

<img src="../../assets/event-stream-destinations/OneSignal-connection-settings.png" alt="OneSignal connection settings"/>

- **App Id**: Enter your OneSignal license code.
- **Device type**: Enter your OneSignal API key.

<div class="infoBlock">
To get your OneSignal license code and API key, log into your OneSignal dashboard and go to <strong>Data Platform</strong> > <strong>Integrations</strong> > <strong>REST API</strong>. For more information, refer to the <Link to="#faq">FAQ</Link> section below.
</div>

- **Data Center**: Select your OneSignal data center from the dropdown.

## Identify 

The <Link to="/event-spec/standard-events/identify">`identify`</Link> method lets you identify a user and associate them to their actions. It also lets you record any traits about them like their name, email, etc.

For Adding a new device to OneSignal App. If a device is already registered with the specified identifier, then this will update the existing device record instead of creating a new one.
Add Device Endpoint `https://onesignal.com/api/v1/players`

A sample `identify` call is shown below:

```javascript
rudderanalytics.identify('userId123', {
            firstName: 'Mike',
            lastName: 'Dwell',
            email: "mike@email.com"
        }, {
            integrations: {
                oneSignal: {
                    deviceType: "6",
                    identifier: ""
                }
            }
        );
```

### Property mapping

| RudderStack property | OneSignal property | Presence | 
| :-------| :--------| :------|
| use the library to check the browser and map the deviceType accordingly and the deviceToken. And this will be overridden by the deviceType in the integrationsObj. | `device_type` | Required | 
| `traits.firstName` | `tags.first_name` | Optional |
| `traits.lastName` | `tags.last_name` | Optional | 
| `context.device.deviceModel` | `device_model` | Optional | 
| `context.os` | `device_os` | Optional | 
| `traits.address.country` | `country` | Optional |
| `context.timezone` | `timezone` | Optional | 
| `anonymousId` | `external_user_id` | Optional | 

### Identify traits considerations

Note the following when sending `identify` traits to OneSignal:

- Either `userId` or `anonymousId` must be present in the `identify` call. 
- If both `userId` and `anonymousId` are present in the `identify` call, RudderStack ignores `anonymousId`.
- OneSignal prioritizes `hashedEmail` over `email`. Hence, once you set `hashedEmail`, it can then be updated only through a new `hashedEmail`.
- OneSignal prioritizes `hashedPhone` over `phone`. Hence, once you set `hashedPhone`, it can then be updated only through a new `hashedPhone`.

## Track

The <Link to="/event-spec/standard-events/track">`track`</Link> method lets you capture user events along with the properties associated with them.

This endpoint is used to update an existing device's tags in one of your OneSignal apps using the `External User ID`. All devices containing a particular externalUserId will update simultaneously.

Update Device Endpoint: `https://onesignal.com/api/v1/apps/{app_id}
/users/{external_user_id}`

**Note** - While updating a device tag, any key inside a tag can be deleted by providing empty string as value for that key. Ignoring that tag key wonâ€™t delete the key from the tag.

A sample `track` call is shown below:

```javascript
rudderanalytics.track('Add to cart', {
    purchased_item: "Shirt",
		brand: "Zara"
	}
);
```

<div class="warningBlock">
Make sure you call <code class="inline-code">identify</code> before <code class="inline-code">track</code> for RudderStack to include the <code class="inline-code">userId</code> in the <code class="inline-code">track</code> events. Otherwise, RudderStack will send the <code class="inline-code">track</code> calls to OneSignal with an <code class="inline-code">anonymousId</code>.
</div>





## Group

The <Link to="/event-spec/standard-events/group">`group`</Link> call lets you link an identified user with a group such as a company, organization, or an account. It also lets you record any custom traits associated with that group like the name of the company, number of employees, etc.

A sample `group` call is as shown 
we can group devices having tags using groupId.

```javascript
rudderanalytics.group('groupId123', {
    firstName: 'Mike',
    lastName: 'Dwell',
    email: "mike@email.com"
});
```

### Property mapping

| RudderStack property | OneSignal property | Presence | 
| :-------| :--------| :------|
| `groupId` | `groupId` | Required | 
| use the library to check the browser and map the deviceType accordingly and the deviceToken. And this will be overridden by the deviceType in the integrationsObj. | `device_type` | Required | 
| `traits.firstName` | `tags.first_name` | Optional |
| `traits.lastName` | `tags.last_name` | Optional | 
| `context.device.deviceModel` | `device_model` | Optional | 
| `context.os` | `device_os` | Optional | 
| `traits.address.country` | `country` | Optional |
| `context.timezone` | `timezone` | Optional | 
| `anonymousId` | `external_user_id` | Optional | 

## FAQ

### Where can I find the OneSignal License Code and API key?

To get your OneSignal License Code and API key, follow these steps:

1. Log into your [OneSignal dashboard](https://dashboard.OneSignal.com/).
2. Go to **Data Platform** > **Integrations** > **REST API**.
3. You will find the OneSignal **License Code** and **API Key** listed under **Project Credentials**, as shown:

<img src="../../assets/event-stream-destinations/OneSignal-license-api-key.png" alt="OneSignal license code and API key" />