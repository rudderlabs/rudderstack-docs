---
title: "Leanplum"
description: Send your event data from RudderStack to Leanplum.
---

[Leanplum](https://www.leanplum.com/) is a popular mobile marketing and customer engagement platform. It allows you to boost customer engagement and thereby drive retention, better conversion and increased business revenue.

RudderStack allows you to configure Leanplum as a destination and send your event data to it directly.

<div class="infoBlock">
Find the open source transformer code for this destination in the <a href="https://github.com/rudderlabs/rudder-transformer/tree/master/src/v0/destinations/leanplum">GitHub repository</a>.
</div>

## Getting started

To enable sending data to Leanplum, you will first need to add it as a destination to the source from which you are sending your event data. Once the destination is enabled, events from our SDK will start flowing to Leanplum.

Before configuring your source and destination in RudderStack, please verify if the source platform is supported by Leanplum, by referring to the table below:

| **Connection Mode** | **Web** | **Mobile**    | **Server** |
| :------------------ | :------ | :------------ | :--------- |
| **Device mode**     | **-**   | **Supported** | -          |
| **Cloud mode**      | **-**   | **-**         | **-**      |

<div class="infoBlock">
To learn more about the difference between cloud mode and device mode in RudderStack, refer to the <Link to="/destinations/rudderstack-connection-modes/">RudderStack Connection Modes</Link> guide.
</div>

Once you have confirmed that the platform supports sending events to Leanplum, perform the steps below:

- From your [RudderStack dashboard](https://app.rudderlabs.com/), add the source. From the list of destinations, select **Leanplum**.
- Give a name to the destination and click **Next**. You should then see the following screen:

<img src="../../assets/image (32) (1) (1) (1) (1).png" /><span class="imageTitle">Leanplum Connection Settings in RudderStack</span>

- Enter the Leanplum **Application ID** as well as **Client Key**.
- Click **Next** to complete the configuration.

Leanplum should now be added and enabled as a destination in RudderStack.

<div class="warningBlock">

If you choose to keep the **Use in Development Environment** flag as on, then please put your `developmentKey` in the `Client Key` field. Failing to do so will result to faulty initialization of the SDK and events will not be passed.

</div>

## Adding Leanplum to your project

Depending on your platform of integration, follow these steps below to add Leanplum to your project:

<!--{% tabs %}
{% tab title="Android" %}
Please follow the steps below to add Leanplum to your Android Project:

- Add the following `repository` to your `app/build.gradle` file.

```groovy
repositories {
    mavenCentral()
}
```

- After that, add the following `dependencies` in the same file:

```groovy
implementation 'com.rudderstack.android.sdk:core:1.+'
implementation 'com.rudderstack.android.integration:leanplum:1.+'
implementation 'com.leanplum:leanplum-core:5+'
```

- Finally, change the initialization of your `RudderClient` in your `Application` class.

```kotlin
val rudderClient = RudderClient.getInstance(
    this,
    WRITE_KEY,
    RudderConfig.Builder()
        .withDataPlaneUrl(DATA_PLANE_URL)
        .withFactory(LeanplumIntegrationFactory.FACTORY)
        .build()
)
```

{% endtab %}

{% tab title="iOS" %}
Follow these steps to add Leanplum to your iOS project:

- Go your `Podfile` and add the `Rudder-Leanplum` extension:

```ruby
pod 'Rudder-Leanplum'
```

- After adding the dependency followed by `pod install` , you can add the imports to your `AppDelegate.m` file as shown:

```objectivec
#import "RudderLeanplumFactory.h"
```

- Finally, change the initialization of your `RudderClient` as shown:

```objectivec
RudderConfigBuilder *builder = [[RudderConfigBuilder alloc] init];
[builder withEndPointUrl:DATA_PLANE_URL];
[builder withFactory:[RudderLeanplumFactory instance]];
[RudderClient getInstance:WRITE_KEY config:[builder build]];
```

{% endtab %}
{% endtabs %} -->

<Tabs>
  <TabList>
    <Tab>Android</Tab>
    <Tab>iOS</Tab>
    <Tab>Flutter</Tab>
  </TabList>
    <TabPanels>
      <TabPanel>
        Please follow the steps below to add Leanplum to your Android Project:
<ul>
<li>Add the following <code class="inline-code">repository</code> to your <code class="inline-code">app/build.gradle</code> file.
<span>

```groovy
repositories {
    mavenCentral()
}
```
</span>
</li>
<li>After that, add the following <code class="inline-code">dependencies</code> in the same file:
<span>

```groovy
implementation 'com.rudderstack.android.sdk:core:1.+'
implementation 'com.rudderstack.android.integration:leanplum:1.+'
implementation 'com.leanplum:leanplum-core:5+'
```
</span>
</li>
<li>Finally, change the initialization of your <code class="inline-code">RudderClient</code> in your <code class="inline-code">Application</code> class.
<span>

```kotlin
val rudderClient = RudderClient.getInstance(
    this,
    WRITE_KEY,
    RudderConfig.Builder()
        .withDataPlaneUrl(DATA_PLANE_URL)
        .withFactory(LeanplumIntegrationFactory.FACTORY)
        .build()
)
```
</span>
</li>
</ul>
      </TabPanel>
      <TabPanel>
        Follow these steps to add Leanplum to your iOS project:
<ul>
<li>Go your <code class="inline-code">Podfile</code> and add the <code class="inline-code">Rudder-Leanplum</code> extension:
<span>

```ruby
pod 'Rudder-Leanplum'
```
</span>
</li>
<li>After adding the dependency followed by <code class="inline-code">pod install</code> , you can add the imports to your <code class="inline-code">AppDelegate.m</code> file as shown:
<span>

```objectivec
#import "RudderLeanplumFactory.h"
```
</span>
</li>
<li>Finally, change the initialization of your <code class="inline-code">RudderClient</code> as shown:
<span>

```objectivec
RudderConfigBuilder *builder = [[RudderConfigBuilder alloc] init];
[builder withEndPointUrl:DATA_PLANE_URL];
[builder withFactory:[RudderLeanplumFactory instance]];
[RudderClient getInstance:WRITE_KEY config:[builder build]];
```
</span>
</li>
</ul>
      </TabPanel>
<TabPanel>
Follow the below steps to add Leanplum to your Flutter Project:
<ol>
<li>Add the following dependency to the <code class="inline-code">dependencies</code> section of your <code class="inline-code">pubspec.yaml</code> file.
<span>

```yaml
rudder_integration_leanplum_flutter: ^1.0.1
```
</span>
</li>
<li>Run the below command to install the dependency added in the above step:
<span>

```groovy
flutter pub get
```
</span>
</li>
<li>Import the <code class="inline-code">RudderIntegrationLeanplumFlutter</code> in your application where you are initializing the SDK.
<span>

```dart
import 'package:rudder_integration_leanplum_flutter/rudder_integration_leanplum_flutter.dart';
```
</span>
</li>

<li>Finally, change the initialization of your <code class="inline-code">RudderClient</code> as shown:
<span>

```dart
final RudderController rudderClient = RudderController.instance;
RudderConfigBuilder builder = RudderConfigBuilder();
builder.withFactory(RudderIntegrationLeanplumFlutter());  
rudderClient.initialize(<WRITE_KEY>, config: builder.build(), options: null);
```
</span>
</li>
</ol>
<div class="infoBlock">
For iOS platform, Leanplum needs to be linked either as a dynamic or static framework with your application. The same can be done by adding the below to your <code class="inline-code">Podfile</code>:

```ruby
use_frameworks! :linkage=> :static // linking statically
(or)
use_frameworks! :linkage=> :dynamic // linking dynamically
```

</div>
      </TabPanel>
    </TabPanels>
</Tabs>

<div class="infoBlock">

The RudderStack SDKs store the <code class="inline-code">traits</code> information from the <code class="inline-code">identify</code> call in <code class="inline-code">SharedPreference</code> and <code class="inline-code">NSUserDefaults</code> for Android and iOS respectively. If RudderStack detects the <code class="inline-code">userId</code> in the persisted traits information, it starts the native SDK along with the <code class="inline-code">userId</code> . On the other hand, if it can't find the <code class="inline-code">userId</code> , it starts the SDK normally without it. This activity helps to build a better session.

The code for Android is the same as below:

<code class="inline-code">Leanplum.start(applicationContext, userId)</code> for a persisted <code class="inline-code">userId</code> and <code class="inline-code">Leanplum.start(applicationContext)</code> if it is not present.

RudderStack follows a similar pattern for iOS as well.

While searching for <code class="inline-code">userId</code> in the persisted traits, RudderStack looks for either of these fields: <code class="inline-code">userId</code> and <code class="inline-code">id</code>.

</div>

## Identify

RudderStack sets the `userId` of the user to the Leanplum SDK via the `setUserId` method, and passes all the properties under `context.traits` to the `setUserAttributes` method, to get populated in Leanplum.

The following is an example of an `identify`call:

```objectivec
[[RudderClient sharedInstance] identify:@"developer_user_id"
                                 traits:@{@"email": @"bar@foo.com"}];
```

## Track

Leanplum accepts any free-flowing property and event name. So, we forward the event as is to the Leanplum SDK without any modification to the payload, as long as the `eventName` is not `null`.

The following is an example of a `track` call in RudderStack:

```objectivec
[[RudderClient sharedInstance] track:@"Accepted Terms of Service"
                          properties:@{
                                  @"foo": @"bar",
                              @"foo_int": @134
}];
```

## Screen

Leanplum supports tracking the user-states. We use the `screen` calls to advance the states of the user to LeanPlum. For every `screen` event we are calling the `advanceTo` method of LeanPlum SDK along with the screen name and the `properties` along with it.

We also send the automatically tracked `screen` events to LeanPlum.

The following is an example of a `screen` call in RudderStack:

```objectivec
[[RudderClient sharedInstance] screen:@"Main"];
```

## Reset

RudderStack calls `clearUserContent` method of the Leanplum SDK to clear the persisted data.

The following code snippet shows a sample `reset` call:

```objectivec
[[RudderClient sharedInstance] reset];
```

## Debugging

RudderStack sets the verbose logging for development mode for the Leanplum Native SDK, based on the `logLevel` of the `RudderClient`. If the `logLevel` is set as `DEBUG` or more, RudderStack will turn on logging using the `enableVerboseLoggingInDevelopmentMode` method of the Leanplum SDK.

## FAQs

### Where do I get the Application ID and the Client Key?

You can find your **Application ID** and **Client Key** by logging on to your Leanplum account and navigating to **More** - **App Settings** . Then, click the **Keys & Settings** button for the application you want to integrate with, and you should get the required credentials.


